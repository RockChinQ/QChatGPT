QChatGPT æ’ä»¶å¼€å‘Wiki

> è¯·å…ˆé˜…è¯»[æ’ä»¶ä½¿ç”¨é¡µ](https://github.com/RockChinQ/QChatGPT/wiki/%E6%8F%92%E4%BB%B6%E4%BD%BF%E7%94%A8)  
> è¯·å…ˆé˜…è¯»[æŠ€æœ¯ä¿¡æ¯é¡µ](https://github.com/RockChinQ/QChatGPT/wiki/%E6%8A%80%E6%9C%AF%E4%BF%A1%E6%81%AF)  
> å»ºè®®å…ˆé˜…è¯»æœ¬é¡¹ç›®æºç ï¼Œäº†è§£é¡¹ç›®æ¶æ„

> é—®é¢˜ã€éœ€æ±‚è¯·åˆ°ä»“åº“issueå‘èµ·  
> **æé—®å‰è¯·å…ˆé è‡ªå·±å°è¯•** 

## ğŸ’¬ç®€ä»‹

å°½ç®¡â€œä¸ºä¸€ä¸ªåŸºäºOpenAI APIçš„QQæœºå™¨äººå¼€å‘æ’ä»¶æ”¯æŒâ€è¿™äº‹çœ‹èµ·æ¥æœ‰ç‚¹å°é¢˜å¤§åšï¼Œä½†èŒç”Ÿæ­¤æƒ³æ³•åçš„å‡ å¤©å†…å¥½å‡ ä¸ªäººæå‡ºäº†è¿™ä¸ªéœ€æ±‚ï¼Œæœ€ç»ˆä¿ƒä½¿æ­¤é¡¹ç›®æ­£å¼æ”¯æŒæ’ä»¶ã€‚

## ğŸ§±å®ç°

åŸºäº`importlib`åº“åŠ è½½æ¨¡å—çš„æ–¹æ³•åŠ¨æ€åŠ è½½é¢å¤–Pythonç¨‹åºæ–‡ä»¶ä»¥ä¾¿å®ç°æ’ä»¶åŠ è½½ï¼Œæ’ä»¶å‡å­˜æ”¾åœ¨`plugins`æ–‡ä»¶å¤¹ï¼Œå…¶ä¸­çš„æ‰€æœ‰`.py`æ–‡ä»¶éƒ½å°†è¢«åŠ è½½(é™¤äº†æ‰€æœ‰`__init__.py`)

## ğŸ“šç¤ºä¾‹ä»£ç 

è¯·æŸ¥çœ‹ä»£ç ç›®å½•`tests/plugin_examples`ä¸­çš„æ’ä»¶ç›®å½•

## ğŸ’»å¿«é€Ÿå¼€å§‹

æŒ‰ç…§æ–‡æ¡£éƒ¨ç½²æ­¤é¡¹ç›®ï¼Œå¹¶ä½¿å…¶æ­£å¸¸è¿è¡Œã€‚  
åœ¨`plugins`ç›®å½•ä¸‹æ–°å»ºç›®å½•`hello`ï¼Œåœ¨å…¶ä¸­æ–°å»ºç©ºæ–‡ä»¶`__init__.py`ä»¥æ ‡è®°æ­¤ç›®å½•ä¸ºè½¯ä»¶åŒ…ï¼Œç»§ç»­æ–°å»ºæ–‡ä»¶`main.py`ã€‚  

> æ‚¨ä¹Ÿå¯ä»¥ä½¿ç”¨[hello_plugin](https://github.com/RockChinQ/hello_plugin)ä½œä¸ºæ¨¡æ¿ç›´æ¥ç”Ÿæˆæ’ä»¶ä»£ç ä»“åº“

ç¼–è¾‘`main.py`è¾“å…¥ä»¥ä¸‹å†…å®¹ï¼š

```Python
from pkg.plugin.models import *
from pkg.plugin.host import EventContext, PluginHost

"""
åœ¨æ”¶åˆ°ç§èŠæˆ–ç¾¤èŠæ¶ˆæ¯"hello"æ—¶ï¼Œå›å¤"hello, <å‘é€è€…id>!"æˆ–"hello, everyone!"
"""


# æ³¨å†Œæ’ä»¶
@register(name="Hello", description="hello world", version="0.1", author="RockChinQ")
class HelloPlugin(Plugin):

    # æ’ä»¶åŠ è½½æ—¶è§¦å‘
    # plugin_host (pkg.plugin.host.PluginHost) æä¾›äº†ä¸ä¸»ç¨‹åºäº¤äº’çš„ä¸€äº›æ–¹æ³•ï¼Œè¯¦ç»†è¯·æŸ¥çœ‹å…¶æºç 
    def __init__(self, plugin_host: PluginHost):
        pass

    # å½“æ”¶åˆ°ä¸ªäººæ¶ˆæ¯æ—¶è§¦å‘
    @on(PersonNormalMessageReceived)
    def person_normal_message_received(self, event: EventContext, **kwargs):
        msg = kwargs['text_message']
        if msg == "hello":  # å¦‚æœæ¶ˆæ¯ä¸ºhello

            # è¾“å‡ºè°ƒè¯•ä¿¡æ¯
            logging.debug("hello, {}".format(kwargs['sender_id']))

            # å›å¤æ¶ˆæ¯ "hello, <å‘é€è€…id>!"
            event.add_return("reply", ["hello, {}!".format(kwargs['sender_id'])])

            # é˜»æ­¢è¯¥äº‹ä»¶é»˜è®¤è¡Œä¸ºï¼ˆå‘æ¥å£è·å–å›å¤ï¼‰
            event.prevent_default()

    # å½“æ”¶åˆ°ç¾¤æ¶ˆæ¯æ—¶è§¦å‘
    @on(GroupNormalMessageReceived)
    def group_normal_message_received(self, event: EventContext, **kwargs):
        msg = kwargs['text_message']
        if msg == "hello":  # å¦‚æœæ¶ˆæ¯ä¸ºhello

            # è¾“å‡ºè°ƒè¯•ä¿¡æ¯
            logging.debug("hello, {}".format(kwargs['sender_id']))

            # å›å¤æ¶ˆæ¯ "hello, everyone!"
            event.add_return("reply", ["hello, everyone!"])

            # é˜»æ­¢è¯¥äº‹ä»¶é»˜è®¤è¡Œä¸ºï¼ˆå‘æ¥å£è·å–å›å¤ï¼‰
            event.prevent_default()

    # æ’ä»¶å¸è½½æ—¶è§¦å‘
    def __del__(self):
        pass

```

æ­¤æ’ä»¶å°†å®ç°ï¼šç§èŠæ”¶åˆ°`hello`æ¶ˆæ¯æ—¶å›å¤`hello, <å‘é€è€…QQå·>!`ï¼Œç¾¤èŠæ”¶åˆ°`hello`æ¶ˆæ¯æ—¶å›å¤`hello, everyone!`

### è§£è¯»æ­¤æ’ä»¶ç¨‹åº

- `import`ä»`pkg.plugin`å¼•å…¥`models`æ¨¡å—çš„æ‰€æœ‰å­—æ®µï¼ˆæ­¤ç¨‹åºä½¿ç”¨äº†å…¶ä¸­çš„`registerå‡½æ•°`ã€`onå‡½æ•°`ã€`Pluginç±»`ã€`PersonNormalMessageReceivedäº‹ä»¶`ã€`GroupNormalMessageReceivedäº‹ä»¶`ï¼‰
- `@register()`å°†ç±»`HelloPlugin`æ ‡è®°ä¸ºä¸€ä¸ªæ’ä»¶ç±»ï¼Œå£°æ˜æ’ä»¶åç§°ä¸º`Hello`ä»¥åŠæ’ä»¶ç®€ä»‹ã€ç‰ˆæœ¬ã€ä½œè€…
- å£°æ˜ç±»`HelloPlugin`ç»§æ‰¿äº`Plugin`ï¼Œæ­¤ç±»å¯ä»¥éšæ„å‘½åï¼Œæ’ä»¶åç§°åªä¸`register`è°ƒç”¨æ—¶çš„å‚æ•°æœ‰å…³
- å£°æ˜æ­¤ç±»çš„`__init__`æ–¹æ³•ï¼Œæ­¤æ–¹æ³•æ˜¯å¯é€‰çš„ï¼Œå…¶ä¸­çš„ä»£ç å°†åœ¨ä¸»ç¨‹åºå¯åŠ¨æ—¶åŠ è½½æ’ä»¶çš„æ—¶å€™è¢«æ‰§è¡Œ
- `@on`å°†æ–¹æ³•`person_normal_message_received`æ ‡è®°ä¸ºä¸€ä¸ªäº‹ä»¶å¤„ç†å™¨ï¼Œå¤„ç†`PersonNormalMessageReceived`ï¼ˆæ”¶åˆ°ç§èŠæ¶ˆæ¯å¹¶åœ¨è·å–OpenAIå›å¤å‰è§¦å‘ï¼‰äº‹ä»¶ï¼Œæ­¤æ–¹æ³•å¯ä»¥éšæ„å‘½åï¼Œç»‘å®šçš„äº‹ä»¶åªä¸`on`ä¸­çš„å‚æ•°æœ‰å…³ï¼Œæ›´å¤šæ”¯æŒçš„äº‹ä»¶å¯åˆ°`pkg.plugin.models.py`æ–‡ä»¶ä¸­æŸ¥çœ‹æˆ–æŸ¥çœ‹ä¸‹æ–¹`API`èŠ‚
- è¾“å‡ºè°ƒè¯•ä¿¡æ¯ï¼Œç¨‹åºä¸­å¯é€šè¿‡`logging`å°†æ—¥å¿—è¾“å‡ºåˆ°æ§åˆ¶å°å’Œ`qchatgpt.log`æ–‡ä»¶
- æ–¹æ³•å†…éƒ¨ä»å‚æ•°ä¸­å–å‡º`text_message`å‚æ•°ï¼Œåˆ¤æ–­æ˜¯å¦ä¸º`hello`ï¼Œå¦‚æœæ˜¯å°±å°†è¿”å›å€¼`reply`è®¾ç½®ä¸º`["hello, {}!".format(kwargs['sender_id'])]`ï¼Œæ¥ä¸‹æ¥è°ƒç”¨`event`å¯¹è±¡çš„`prevent_default`æ–¹æ³•ï¼Œé˜»æ­¢åŸç¨‹åºé»˜è®¤è¡Œä¸º
    - æ¯ä¸ªäº‹ä»¶`æä¾›çš„å‚æ•°`å’Œ`æ”¯æŒçš„è¿”å›å€¼`è¯·æŸ¥çœ‹`pkg.plugin.models`ä¸­çš„æ¯ä¸ªäº‹ä»¶çš„æ³¨é‡Šæˆ–æŸ¥çœ‹ä¸‹æ–¹`API`èŠ‚
    - `event`å¯¹è±¡æä¾›çš„æ–¹æ³•è¯·æŸ¥çœ‹`pkg.plugin.host`ä¸­çš„`EventContext`ç±»æˆ–æŸ¥çœ‹ä¸‹æ–¹`API`èŠ‚
- ç”¨ç›¸ä¼¼çš„ç¨‹åºæ³¨å†Œ`GroupNormalMessageReceived`äº‹ä»¶å¤„ç†ç¾¤æ¶ˆæ¯

ç¼–å†™å®Œæ¯•ä¿å­˜åï¼Œé‡æ–°å¯åŠ¨ä¸»ç¨‹åºï¼ŒæŸ¥çœ‹åˆ°è¾“å‡ºä¸­åŒ…å«ä»¥ä¸‹å†…å®¹ï¼Œå³ä¸ºåŠ è½½æˆåŠŸï¼š

```
[2023-01-16 18:29:47.193] host.py (43) - [INFO] : åŠ è½½æ¨¡å—: hello.main
[2023-01-16 18:29:47.194] models.py (209) - [INFO] : æ’ä»¶æ³¨å†Œå®Œæˆ: n='Hello', d='hello world', v=0.1, a='RockChinQ' (<class 'plugins.hello.main.HelloPlugin'>)
```

> å»ºè®®åœ¨`config.py`ä¸­è®¾ç½®`logging_level = logging.DEBUG`ä»¥ä¾¿å¼€å¯è°ƒè¯•è¾“å‡º

## â—è§„èŒƒ(é‡è¦)

- è¯·æ¯ä¸ªæ’ä»¶ç‹¬ç«‹ä¸€ä¸ªç›®å½•ä»¥ä¾¿ç®¡ç†ï¼Œå»ºè®®åœ¨Githubä¸Šåˆ›å»ºä¸€ä¸ªä»“åº“å‚¨å­˜å•ä¸ªæ’ä»¶ï¼Œä»¥ä¾¿è·å–å’Œæ›´æ–°
- æ’ä»¶åä½¿ç”¨`å¤§é©¼å³°å‘½åæ³•`ï¼Œå¦‚`Hello`ã€`ExamplePlugin`ã€`ChineseCommands`ç­‰
- ä¸€ä¸ªç›®å½•å†…å¯ä»¥å­˜æ”¾å¤šä¸ªPythonç¨‹åºæ–‡ä»¶ï¼Œä»¥ç‹¬ç«‹å‡ºæ’ä»¶çš„å„ä¸ªåŠŸèƒ½ï¼Œä¾¿äºå¼€å‘è€…ç®¡ç†ï¼Œä½†ä¸å»ºè®®åœ¨ä¸€ä¸ªç›®å½•å†…æ³¨å†Œå¤šä¸ªæ’ä»¶
- æ’ä»¶éœ€è¦çš„ä¾èµ–åº“è¯·åœ¨æ’ä»¶ç›®å½•ä¸‹çš„`requirements.txt`ä¸­æŒ‡å®šï¼Œç¨‹åºä»å‚¨å­˜åº“è·å–æ­¤æ’ä»¶æ—¶å°†è‡ªåŠ¨å®‰è£…ä¾èµ–

## ğŸ“„APIå‚è€ƒ

### è¯´æ˜

äº‹ä»¶å¤„ç†å‡½æ•°å°†ä¼šè·å¾—ä¸€ç³»åˆ—å‚æ•°ï¼Œå¯ä»¥åœ¨`kwargs`ä¸­å–å‡ºã€‚  
å…¶ä¸­`host`å‚æ•°ï¼ˆ`pkg.plugin.host.PluginHost`ç±»çš„å®ä¾‹ï¼‰æ˜¯æ’ä»¶å®¿ä¸»ï¼Œæä¾›ä¸ä¸»ç¨‹åºå„ä¸ªæ¨¡å—äº¤äº’çš„ä¸€äº›æ–¹æ³•ã€‚  
`event`å‚æ•°ï¼ˆ`pkg.plugin.host.EventContext`ç±»çš„å®ä¾‹ï¼‰æ˜¯äº‹ä»¶æ‰§è¡ŒæœŸé—´çš„ä¸Šä¸‹æ–‡ï¼Œæä¾›å¯¹æ­¤æ¬¡äº‹ä»¶æ‰§è¡Œçš„ä¸€äº›æ“ä½œæ–¹æ³•ã€‚  

äº‹ä»¶è¿”å›å€¼å‡ä¸º**å¯é€‰**çš„ï¼Œå¯ä»¥é€šè¿‡è°ƒç”¨`event.add_return(key: str, ret)`æ¥æäº¤è¿”å›å€¼

### äº‹ä»¶

æ‰€æœ‰äº‹ä»¶å‚æ•°å‡æœ‰`host`å’Œ`event`ï¼Œä»¥ä¸‹ä»…å±•ç¤ºå…¶ä»–å‚æ•°  
å…³äº`YiriMirai`æ”¯æŒçš„æ¶ˆæ¯é“¾ç»„ä»¶ï¼Œè¯·æŸ¥çœ‹ [YiriMiraiçš„æ–‡æ¡£](https://yiri-mirai.wybxc.cc/docs/basic/message-chain)

```Python
PersonMessageReceived = "person_message_received"
"""æ”¶åˆ°ç§èŠæ¶ˆæ¯æ—¶ï¼Œåœ¨åˆ¤æ–­æ˜¯å¦åº”è¯¥å“åº”å‰è§¦å‘
    kwargs:
        launcher_type: str å‘èµ·å¯¹è±¡ç±»å‹(group/person)
        launcher_id: int å‘èµ·å¯¹è±¡ID(ç¾¤å·/QQå·)
        sender_id: int å‘é€è€…ID(QQå·)
        message_chain: mirai.models.message.MessageChain æ¶ˆæ¯é“¾
"""

GroupMessageReceived = "group_message_received"
"""æ”¶åˆ°ç¾¤èŠæ¶ˆæ¯æ—¶ï¼Œåœ¨åˆ¤æ–­æ˜¯å¦åº”è¯¥å“åº”å‰è§¦å‘ï¼ˆæ‰€æœ‰ç¾¤æ¶ˆæ¯ï¼‰
    kwargs:
        launcher_type: str å‘èµ·å¯¹è±¡ç±»å‹(group/person)
        launcher_id: int å‘èµ·å¯¹è±¡ID(ç¾¤å·/QQå·)
        sender_id: int å‘é€è€…ID(QQå·)
        message_chain: mirai.models.message.MessageChain æ¶ˆæ¯é“¾
"""

PersonNormalMessageReceived = "person_normal_message_received"
"""åˆ¤æ–­ä¸ºåº”è¯¥å¤„ç†çš„ç§èŠæ™®é€šæ¶ˆæ¯æ—¶è§¦å‘
    kwargs:
        launcher_type: str å‘èµ·å¯¹è±¡ç±»å‹(group/person)
        launcher_id: int å‘èµ·å¯¹è±¡ID(ç¾¤å·/QQå·)
        sender_id: int å‘é€è€…ID(QQå·)
        text_message: str æ¶ˆæ¯æ–‡æœ¬
        
    returns (optional):
        alter: str ä¿®æ”¹åçš„æ¶ˆæ¯æ–‡æœ¬
        reply: list å›å¤æ¶ˆæ¯ç»„ä»¶åˆ—è¡¨ï¼Œå…ƒç´ ä¸ºYiriMiraiæ”¯æŒçš„æ¶ˆæ¯ç»„ä»¶
"""

PersonCommandSent = "person_command_sent"
"""åˆ¤æ–­ä¸ºåº”è¯¥å¤„ç†çš„ç§èŠæŒ‡ä»¤æ—¶è§¦å‘
    kwargs:
        launcher_type: str å‘èµ·å¯¹è±¡ç±»å‹(group/person)
        launcher_id: int å‘èµ·å¯¹è±¡ID(ç¾¤å·/QQå·)
        sender_id: int å‘é€è€…ID(QQå·)
        command: str æŒ‡ä»¤
        params: list[str] å‚æ•°åˆ—è¡¨
        text_message: str å®Œæ•´æŒ‡ä»¤æ–‡æœ¬
        is_admin: bool æ˜¯å¦ä¸ºç®¡ç†å‘˜
    
    returns (optional):
        alter: str ä¿®æ”¹åçš„å®Œæ•´æŒ‡ä»¤æ–‡æœ¬
        reply: list å›å¤æ¶ˆæ¯ç»„ä»¶åˆ—è¡¨ï¼Œå…ƒç´ ä¸ºYiriMiraiæ”¯æŒçš„æ¶ˆæ¯ç»„ä»¶
"""

GroupNormalMessageReceived = "group_normal_message_received"
"""åˆ¤æ–­ä¸ºåº”è¯¥å¤„ç†çš„ç¾¤èŠæ™®é€šæ¶ˆæ¯æ—¶è§¦å‘
    kwargs:
        launcher_type: str å‘èµ·å¯¹è±¡ç±»å‹(group/person)
        launcher_id: int å‘èµ·å¯¹è±¡ID(ç¾¤å·/QQå·)
        sender_id: int å‘é€è€…ID(QQå·)
        text_message: str æ¶ˆæ¯æ–‡æœ¬
        
    returns (optional):
        alter: str ä¿®æ”¹åçš„æ¶ˆæ¯æ–‡æœ¬
        reply: list å›å¤æ¶ˆæ¯ç»„ä»¶åˆ—è¡¨ï¼Œå…ƒç´ ä¸ºYiriMiraiæ”¯æŒçš„æ¶ˆæ¯ç»„ä»¶
"""

GroupCommandSent = "group_command_sent"
"""åˆ¤æ–­ä¸ºåº”è¯¥å¤„ç†çš„ç¾¤èŠæŒ‡ä»¤æ—¶è§¦å‘
    kwargs:
        launcher_type: str å‘èµ·å¯¹è±¡ç±»å‹(group/person)
        launcher_id: int å‘èµ·å¯¹è±¡ID(ç¾¤å·/QQå·)
        sender_id: int å‘é€è€…ID(QQå·)
        command: str æŒ‡ä»¤
        params: list[str] å‚æ•°åˆ—è¡¨
        text_message: str å®Œæ•´æŒ‡ä»¤æ–‡æœ¬
        is_admin: bool æ˜¯å¦ä¸ºç®¡ç†å‘˜
    
    returns (optional):
        alter: str ä¿®æ”¹åçš„å®Œæ•´æŒ‡ä»¤æ–‡æœ¬
        reply: list å›å¤æ¶ˆæ¯ç»„ä»¶åˆ—è¡¨ï¼Œå…ƒç´ ä¸ºYiriMiraiæ”¯æŒçš„æ¶ˆæ¯ç»„ä»¶
"""

NormalMessageResponded = "normal_message_responded"
"""è·å–åˆ°å¯¹æ™®é€šæ¶ˆæ¯çš„æ–‡å­—å“åº”æ—¶è§¦å‘
    kwargs:
        launcher_type: str å‘èµ·å¯¹è±¡ç±»å‹(group/person)
        launcher_id: int å‘èµ·å¯¹è±¡ID(ç¾¤å·/QQå·)
        sender_id: int å‘é€è€…ID(QQå·)
        session: pkg.openai.session.Session ä¼šè¯å¯¹è±¡
        prefix: str å›å¤æ–‡å­—æ¶ˆæ¯çš„å‰ç¼€
        response_text: str å“åº”æ–‡æœ¬
    
    returns (optional):
        prefix: str ä¿®æ”¹åçš„å›å¤æ–‡å­—æ¶ˆæ¯çš„å‰ç¼€
        reply: list æ›¿æ¢å›å¤æ¶ˆæ¯ç»„ä»¶åˆ—è¡¨ï¼Œå…ƒç´ ä¸ºYiriMiraiæ”¯æŒçš„æ¶ˆæ¯ç»„ä»¶
"""

SessionFirstMessageReceived = "session_first_message_received"
"""ä¼šè¯è¢«ç¬¬ä¸€æ¬¡äº¤äº’æ—¶è§¦å‘
    kwargs:
        session_name: str ä¼šè¯åç§°(<launcher_type>_<launcher_id>)
        session: pkg.openai.session.Session ä¼šè¯å¯¹è±¡
        default_prompt: str é¢„è®¾å€¼
"""

SessionExplicitReset = "session_reset"
"""ä¼šè¯è¢«ç”¨æˆ·æ‰‹åŠ¨é‡ç½®æ—¶è§¦å‘ï¼Œæ­¤äº‹ä»¶ä¸æ”¯æŒé˜»æ­¢é»˜è®¤è¡Œä¸º
    kwargs:
        session_name: str ä¼šè¯åç§°(<launcher_type>_<launcher_id>)
        session: pkg.openai.session.Session ä¼šè¯å¯¹è±¡
"""

SessionExpired = "session_expired"
"""ä¼šè¯è¿‡æœŸæ—¶è§¦å‘
    kwargs:
        session_name: str ä¼šè¯åç§°(<launcher_type>_<launcher_id>)
        session: pkg.openai.session.Session ä¼šè¯å¯¹è±¡
        session_expire_time: int å·²è®¾ç½®çš„ä¼šè¯è¿‡æœŸæ—¶é—´(ç§’)   
"""

KeyExceeded = "key_exceeded"
"""api-keyè¶…é¢æ—¶è§¦å‘
    kwargs:
        key_name: str è¶…é¢çš„api-keyåç§°
        usage: dict è¶…é¢çš„api-keyä½¿ç”¨æƒ…å†µ
        exceeded_keys: list[str] è¶…é¢çš„api-keyåˆ—è¡¨
"""

KeySwitched = "key_switched"
"""api-keyè¶…é¢åˆ‡æ¢æˆåŠŸæ—¶è§¦å‘ï¼Œæ­¤äº‹ä»¶ä¸æ”¯æŒé˜»æ­¢é»˜è®¤è¡Œä¸º
    kwargs:
        key_name: str åˆ‡æ¢æˆåŠŸçš„api-keyåç§°
        key_list: list[str] api-keyåˆ—è¡¨
"""
```

### host: PluginHost è¯¦è§£

æä¾›ä¸ä¸»ç¨‹åºå„ä¸ªæ¨¡å—äº¤äº’çš„ä¸€äº›æ–¹æ³•,å…·ä½“æŸ¥çœ‹`pkg.plugin.host`ä¸­çš„`PluginHost`ç±»  

### event: EventContext è¯¦è§£

æä¾›å¯¹æ­¤æ¬¡äº‹ä»¶æ‰§è¡Œçš„ä¸€äº›æ“ä½œæ–¹æ³•,å…·ä½“æŸ¥çœ‹`pkg.plugin.host`ä¸­çš„`EventContext`ç±»
